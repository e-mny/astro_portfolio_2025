---
import { getCollection } from 'astro:content';

// Fetch all archived Now pages
const archives = await getCollection('now');

// Sort by date (newest first)
archives.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
---

<aside class="min-w-fit hidden lg:block fixed left-0 top-[3rem] px-4 ml-4 mr-8 border-r-2 h-full overflow-y-visible">
  <h3 class="text-lg font-semibold mb-2 dark:text-white">ğŸ“œ Archives</h3>
  <ul class="space-y-2">
    {archives.map((archive) => (
      <li>
        <a href={`/now/${archive.slug}`} class="block p-2 text-zinc-600 dark:text-zinc-400 hover:text-blue-500">
          {archive.data.title}
        </a>
      </li>
    ))}
  </ul>
</aside>
